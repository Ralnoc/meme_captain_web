<h1>New Meme</h1>

<%= image_tag(url_for(@gend_image.src_image.src_thumb)) %>

<%= form_for @gend_image, :url => {:action => 'create'} do |f| %>
    <%= f.error_messages %>

    <%= f.hidden_field :src_image_id, :value => @gend_image.src_image.id_hash %>
    <p>
      Source image: <%= @gend_image.src_image.id_hash %>
    </p>

    <% @gend_image.captions.each.with_index do |caption, index| %>
        <%= f.fields_for :captions, caption do |cf| %>
            <%= cf.label :text %>
            <%= cf.text_field :text, :autofocus => @caption_defaults[index][:autofocus] %>

            <%= cf.hidden_field :font, value: 'Coda-Heavy.ttf' %>
            <%= cf.hidden_field :top_left_x_pct, value: 0.05 %>
            <%= cf.hidden_field :top_left_y_pct, value: @caption_defaults[index][:top_left_y_pct] %>
            <%= cf.hidden_field :width_pct, value: 0.9 %>
            <%= cf.hidden_field :height_pct, value: 0.25 %>
        <% end %>
    <% end %>

    <p>
      <%= f.submit 'Create', :class => 'btn' %>
    </p>
<% end %>
